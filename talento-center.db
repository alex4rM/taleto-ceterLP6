
CREATE TABLE usuario (
                id INT NOT NULL,
                usuario VARCHAR(90) NOT NULL,
                contra_user VARCHAR(120) NOT NULL,
                nombre VARCHAR(40) NOT NULL,
                rolle VARCHAR(30) NOT NULL,
                PRIMARY KEY (id)
);


CREATE TABLE persona (
                id_user INT AUTO_INCREMENT NOT NULL,
                nombre VARCHAR(50) NOT NULL,
                apellidos VARCHAR(60) NOT NULL,
                correo VARCHAR(80) NOT NULL,
                telefono VARCHAR(10) NOT NULL,
                dni VARCHAR(8) NOT NULL,
                PRIMARY KEY (id_user)
);


CREATE TABLE reserva_cita (
                id_reserva INT AUTO_INCREMENT NOT NULL,
                fecha DATE NOT NULL,
                hora TIME NOT NULL,
                estado_cita INT DEFAULT 0 NOT NULL,
                id_user INT NOT NULL,
                PRIMARY KEY (id_reserva)
);

ALTER TABLE reserva_cita MODIFY COLUMN estado_cita INTEGER COMMENT 'Si es 0 es por q no fue atendida';


ALTER TABLE reserva_cita ADD CONSTRAINT usuario_reserva_cita_fk
FOREIGN KEY (id_user)
REFERENCES persona (id_user)
ON DELETE NO ACTION
ON UPDATE NO ACTION;

#Usuario admin
INSERT INTO `usuario` (`id`, `usuario`, `contra_user`, `nombre`, `rolle`) VALUES ('1', 'admin', 'pbkdf2:sha256:260000$jeLkVaC5uNKKdYnS$02ee62ecde3dfa9ff90dd61dac0c4bb17a359cb46e4a3fd502744e0377b60402', 'Administrador', 'admin');